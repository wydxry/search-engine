<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>微博全文搜索</title>
<style>
body { font-family: "Hiragino Sans GB", sans-serif; font-size:0.9em; margin-left: 100px;}
p { line-height:150%;}
#query { width: 400px; }
table { border-collapse: collapse; border-spacing: 0; padding: 0px; width: 800px;}
</style>
<script type="text/javascript" src="jquery.min.js"></script>

</head>
<body>
<h2>搜索</h2>
<p><input type="text" id="query"><button onclick="search()">搜索</button></p>
<div id="output"></div>
</body>
<script type="text/javascript">
    console.log("11111111")
    // search = function() {
    function search () {
        var query = $('input#query').val();
        $.ajax({
            url: "/json",
            type: "GET",
            data: { query: query },
            dataType: "json",
            success: function (result) {
                var out = "<table border=0>"


                for (var i = 0; i < result.docs.length; i++){

                    out += "<tr>"

                    out += "<td>";
                    out += "<p>" +result.docs[i]+ "</p>";
                    out += "</td>";

                    out += "</tr>";
                }
                out += "</table>"
                $('div#output').html(out);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            }
        });
    };
</script>
</html>
